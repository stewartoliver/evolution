<main class="flex-1 p-6 bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark">
  <div class="flex flex-col lg:flex-row gap-4 lg:gap-6">
    <!-- Left Sidebar -->
    <div class="flex flex-col gap-6 lg:w-1/3">
      <!-- Basic Info Card -->
      <div class="p-6 bg-background-card dark:bg-background-card-dark rounded-lg shadow-md">
        <div class="flex justify-between items-center mb-6">
          <%= link_to :back, class: "flex gap-1 items-center font-semibold text-text-light dark:text-text-dark hover:opacity-80 whitespace-nowrap w-min" do %>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 9-3 3m0 0 3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>
            Back
          <% end %>
        </div>
        <div class="flex flex-col tracking-tight leading-tight">
          <div class="text-4xl font-bold uppercase mb-6">
            Edit Profile
          </div>
          <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
            <div class="flex flex-col gap-4">
              <%= render "devise/shared/error_messages", resource: resource %>
              
              <div class="flex flex-col gap-1">
                <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                  <%= f.label :email %>
                </div>
                <div class="text-sm">
                  <%= f.email_field :email, autofocus: true, autocomplete: "email", class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                </div>
              </div>

              <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                <div class="text-sm text-text-sub dark:text-text-sub-dark">Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
              <% end %>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="flex flex-col gap-1">
                  <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                    <%= f.label :first_name %>
                  </div>
                  <div class="text-sm">
                    <%= f.text_field :first_name, class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                  </div>
                </div>
                <div class="flex flex-col gap-1">
                  <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                    <%= f.label :last_name %>
                  </div>
                  <div class="text-sm">
                    <%= f.text_field :last_name, class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                  </div>
                </div>
              </div>

              <div class="flex flex-col gap-1">
                <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                  <%= f.label :date_of_birth %>
                </div>
                <div class="text-sm">
                  <%= f.date_field :date_of_birth, start_year: Time.now.year - 100, end_year: Time.now.year, class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                </div>
              </div>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="flex flex-col gap-1">
                  <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                    <%= f.label :height %>
                  </div>
                  <div class="text-sm">
                    <%= f.number_field :height, step: 0.1, class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                  </div>
                </div>
                <div class="flex flex-col gap-1">
                  <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                    <%= f.label :preferred_units %>
                  </div>
                  <div class="text-sm">
                    <%= f.select :preferred_units, [['Metric', 'metric'], ['Imperial', 'imperial']], {}, { class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" } %>
                  </div>
                </div>
              </div>

              <div class="flex flex-col gap-1">
                <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                  <%= f.label :gender %>
                </div>
                <div class="text-sm">
                  <%= f.select :gender, [['Male', 'male'], ['Female', 'female'], ['Other', 'other']], { prompt: 'Select Gender' }, { class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" } %>
                </div>
              </div>

              <div class="flex flex-col gap-1">
                <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                  <%= f.label :activity_level %>
                </div>
                <div class="text-sm">
                  <%= f.select :activity_level, [['Sedentary', 0], ['Lightly Active', 1], ['Active', 2], ['Very Active', 3]], { prompt: 'Select Activity Level' }, { class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" } %>
                </div>
              </div>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="flex flex-col gap-1">
                  <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                    <%= f.label :current_weight %>
                  </div>
                  <div class="text-sm">
                    <%= f.number_field :current_weight, step: 0.1, class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                  </div>
                </div>
                <div class="flex flex-col gap-1">
                  <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                    <%= f.label :goal_weight %>
                  </div>
                  <div class="text-sm">
                    <%= f.number_field :goal_weight, step: 0.1, class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                  </div>
                </div>
              </div>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="flex flex-col gap-1">
                  <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                    <%= f.label :current_calorie_intake %>
                  </div>
                  <div class="text-sm">
                    <%= f.number_field :current_calorie_intake, step: 0.1, class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                  </div>
                </div>
                <div class="flex flex-col gap-1">
                  <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                    <%= f.label :target_calorie_intake %>
                  </div>
                  <div class="text-sm">
                    <%= f.number_field :target_calorie_intake, step: 0.1, class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                  </div>
                </div>
              </div>

              <div class="flex flex-col gap-1">
                <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                  <%= f.label :password %>
                </div>
                <div class="text-sm text-text-sub dark:text-text-sub-dark">
                  (leave blank if you don't want to change it)
                </div>
                <div class="text-sm">
                  <%= f.password_field :password, autocomplete: "new-password", class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                </div>
              </div>

              <div class="flex flex-col gap-1">
                <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                  <%= f.label :password_confirmation %>
                </div>
                <div class="text-sm">
                  <%= f.password_field :password_confirmation, autocomplete: "new-password", class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                </div>
              </div>

              <div class="flex flex-col gap-1">
                <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
                  <%= f.label :current_password %>
                </div>
                <div class="text-sm text-text-sub dark:text-text-sub-dark">
                  (we need your current password to confirm your changes)
                </div>
                <div class="text-sm">
                  <%= f.password_field :current_password, autocomplete: "current-password", class: "rounded-md border bg-background-input-light dark:bg-background-input-dark text-text-light dark:text-text-dark border-border-light dark:border-border-dark font-medium text-sm focus:ring-0 w-full" %>
                </div>
              </div>

              <div class="flex justify-end mt-4">
                <%= f.submit "Update Profile", class: "inline-flex items-center px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white text-sm font-medium rounded-md transition" %>
              </div>
            </div>
          <% end %>
        </div>
      </div>

      <!-- Account Deletion Card -->
      <div class="p-6 bg-background-card dark:bg-background-card-dark rounded-lg shadow-md">
        <div class="flex items-center gap-2 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-6 text-red-500">
            <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
          </svg>
          <h2 class="text-xl font-semibold text-red-500">Danger Zone</h2>
        </div>
        <div class="flex flex-col gap-4">
          <div class="flex flex-col gap-2">
            <div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">Cancel Account</div>
            <div class="text-sm text-text-sub dark:text-text-sub-dark">Once you delete your account, there is no going back. Please be certain.</div>
          </div>
          <%= button_to "Delete Account", registration_path(resource_name), data: { confirm: "Are you sure?", turbo_confirm: "Are you sure?" }, method: :delete, class: "px-6 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors" %>
        </div>
      </div>
    </div>
  </div>
</main>