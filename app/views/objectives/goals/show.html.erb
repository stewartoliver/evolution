<main class="flex-1 p-6 bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark">
	<div class="flex flex-col lg:flex-row gap-4 lg:gap-6">
		<div class="flex flex-col gap-6 lg:w-1/3 p-6 bg-background-card dark:bg-background-card-dark rounded-lg shadow-md">
			<!-- Header Section -->
			<div class="flex justify-between items-center">
				<%= link_to :back, class: "flex gap-1 items-center font-semibold text-text-light dark:text-text-dark hover:opacity-80 whitespace-nowrap w-min" do %>
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-5">
					<path stroke-linecap="round" stroke-linejoin="round" d="m11.25 9-3 3m0 0 3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
				</svg>
				Back
				<% end %>
				<div data-goal-id="<%= @goal.id %>" data-initial-favourite="<%= @goal.is_favourite %>" class="heart-icon"></div>
			</div>
			<div class="flex flex-col tracking-tight leading-tight">
				<div class="text-4xl font-bold uppercase">
					<%= @goal.title %>
				</div>
				<div style="background-color: <%= @goal.goal_type.colour %>;" class="mt-1 px-2 py-1 rounded-md font-semibold uppercase text-white text-xs tracking-wide w-min whitespace-nowrap">
					<%= @goal.goal_type.name %>
				</div>
			</div>
			<div class="flex flex-col">
				<div class="py-4">
					<div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
						Description:
					</div>
					<div class="text-sm">
						<%= @goal.description %>
					</div>
				</div>
				<div class="pt-4">
					<div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
						Timeline:
					</div>
					<div class="mt-2">
						<div class="flex items-center gap-2">
							<div class="flex flex-col items-start px-2 py-1 gap-1 rounded-md bg-background-input-light dark:bg-background-input-dark">
								<span class="text-sm font-medium text-text-light dark:text-text-dark">Start Date:</span>
								<div class="flex items-center gap-1">
									<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 text-primary">
										<path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" />
									</svg>
									<span><%= @goal.start_date.strftime("%-d %b %Y") %></span>
								</div>
							</div>
							<% if @goal.end_date.present? %>
							<div class="flex flex-col items-start px-2 py-1 gap-1 rounded-md bg-background-input-light dark:bg-background-input-dark">
								<span class="text-sm font-medium text-text-light dark:text-text-dark">End Date:</span>
								<div class="flex items-center gap-1">
									<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 <%= @goal.overdue? ? 'text-red-500' : 'text-primary' %>">
										<path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" />
									</svg>
									<span class="<%= @goal.overdue? ? 'text-red-500 font-semibold' : '' %>">
										<%= @goal.end_date.strftime("%-d %b %Y") %>
									</span>
								</div>
							</div>
							<% end %>
						</div>
					</div>
				</div>
				<div class="pt-4">
					<div class="text-sm font-medium text-text-sub dark:text-text-sub-dark">
						Progress:
					</div>
					<div class="flex items-center justify-between text-base">
						<div>
							<% if @goal.status.present? %>
							(<%= @goal.status.capitalize.gsub('-', ' ') %>)
							<% end %>
						</div>
						<div class="font-semibold">
							<%= @goal.progress %>%
						</div>
					</div>
					<div class="w-full bg-border-light dark:bg-border-dark rounded-full h-2 mt-1">
						<div class="bg-primary-500 h-2 rounded-full" style="width: <%= @goal.progress %>%"></div>
					</div>
				</div>

				<!-- Actions -->
				<div class="flex justify-end gap-3 items-center pt-6">
					<%= link_to edit_objectives_goal_path(@goal), class: "inline-flex items-center px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white text-sm font-medium rounded-md transition" do %>
					Edit
					<% end %>
				</div>
			</div>
		</div>

		<!-- Board Section -->
		<div class="flex flex-col w-full">
			<!-- Board Root -->
			<div id="board-root" data-goal-id="<%= @goal.id %>"></div>
		</div>
	</div>
</main>
