<nav class="bg-background-light dark:bg-background-dark border-b border-border-light dark:border-border-dark">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16">
      <!-- Logo and Home Link -->
      <div class="flex-shrink-0 flex items-center">
        <%= link_to root_path, class: "text-xl font-bold text-primary-500 flex items-center gap-2" do %>
          <%= image_tag 'evolve_logo.svg', alt: 'Evolve Logo', class: 'h-6 w-6' %>
          Evolve
        <% end %>
      </div>
      <div class="flex items-center">
        <!-- Finances Menu -->
        <div class="relative inline-block text-left ml-6">
          <div>
            <button type="button" class="group inline-flex items-center px-3 py-2 text-sm font-medium text-text-light dark:text-text-dark hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none" id="finances-menu-button" aria-expanded="false" aria-haspopup="true">
              <span>Finances</span>
              <svg class="ml-2 h-5 w-5 text-text-sub dark:text-text-sub-dark group-hover:text-primary-600 dark:group-hover:text-primary-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
          <div class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-background DEFAULT: bg-white dark:bg-background-dark ring-1 ring-black ring-opacity-5 hidden" role="menu" aria-orientation="vertical" aria-labelledby="finances-menu-button" id="finances-menu-dropdown">
            <div class="py-1" role="none">
              <%= link_to 'Create', new_finances_account_path, class: "block px-4 py-2 text-sm text-text-light dark:text-text-dark hover:bg-primary-100 dark:hover:bg-primary-800", role: "menuitem", tabindex: "-1", id: "finances-menu-item-0" %>
              <%= link_to 'Dashboard', finances_dashboard_path, class: "block px-4 py-2 text-sm text-text-light dark:text-text-dark hover:bg-primary-100 dark:hover:bg-primary-800", role: "menuitem", tabindex: "-1", id: "finances-menu-item-1" %>
            </div>
          </div>
        </div>
        <!-- Fitness Menu -->
        <div class="relative inline-block text-left ml-6">
          <div>
            <button type="button" class="group inline-flex items-center px-3 py-2 text-sm font-medium text-text-light dark:text-text-dark hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none" id="fitness-menu-button" aria-expanded="false" aria-haspopup="true">
              <span>Fitness</span>
              <svg class="ml-2 h-5 w-5 text-text-sub dark:text-text-sub-dark group-hover:text-primary-600 dark:group-hover:text-primary-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
          <div class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-background DEFAULT: bg-white dark:bg-background-dark ring-1 ring-black ring-opacity-5 hidden" role="menu" aria-orientation="vertical" aria-labelledby="fitness-menu-button" id="fitness-menu-dropdown">
            <div class="py-1" role="none">
              <%= link_to 'Dashboard', fitness_dashboard_path, class: "block px-4 py-2 text-sm text-text-light dark:text-text-dark hover:bg-primary-100 dark:hover:bg-primary-800", role: "menuitem", tabindex: "-1", id: "fitness-menu-item-0" %>
              <%= link_to 'Exercises', fitness_exercises_path, class: "block px-4 py-2 text-sm text-text-light dark:text-text-dark hover:bg-primary-100 dark:hover:bg-primary-800", role: "menuitem", tabindex: "-1", id: "fitness-menu-item-1" %>
              <%= link_to 'Routines', fitness_routines_path, class: "block px-4 py-2 text-sm text-text-light dark:text-text-dark hover:bg-primary-100 dark:hover:bg-primary-800", role: "menuitem", tabindex: "-1", id: "fitness-menu-item-2" %>
            </div>
          </div>
        </div>
        <!-- Objectives Menu -->
        <div class="relative inline-block text-left ml-6">
          <div>
            <button type="button" class="group inline-flex items-center px-3 py-2 text-sm font-medium text-text-light dark:text-text-dark hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none" id="goals-menu-button" aria-expanded="false" aria-haspopup="true">
              <span>Objectives</span>
              <svg class="ml-2 h-5 w-5 text-text-sub dark:text-text-sub-dark group-hover:text-primary-600 dark:group-hover:text-primary-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
          <div class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-background DEFAULT: bg-white dark:bg-background-dark ring-1 ring-black ring-opacity-5 hidden" role="menu" aria-orientation="vertical" aria-labelledby="goals-menu-button" id="goals-menu-dropdown">
            <div class="py-1" role="none">
              <%= link_to 'Create', new_objectives_goal_path, class: "block px-4 py-2 text-sm text-text-light dark:text-text-dark hover:bg-primary-100 dark:hover:bg-primary-800", role: "menuitem", tabindex: "-1", id: "goals-menu-item-0" %>
              <%= link_to 'Dashboard', objectives_dashboard_path, class: "block px-4 py-2 text-sm text-text-light dark:text-text-dark hover:bg-primary-100 dark:hover:bg-primary-800", role: "menuitem", tabindex: "-1", id: "goals-menu-item-1" %>
            </div>
          </div>
        </div>
      </div>
      <div class="flex items-center">
        <!-- Theme Toggle Switch -->
        <div class="flex items-center ml-6">
          <label for="theme-toggle" class="relative inline-flex items-center cursor-pointer" aria-label="Toggle Dark Mode">
            <input type="checkbox" id="theme-toggle" class="sr-only peer">
            <div class="w-11 h-6 bg-border-light peer-focus:outline-none rounded-full peer dark:bg-border-dark peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border-light after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:after:border-border-dark peer-checked:bg-primary-500"></div>
            <span class="ml-3 text-sm font-medium text-text-light dark:text-text-dark">Dark Mode</span>
          </label>
        </div>
      </div>
      <% if current_user&.operator? %>
        <div class="flex items-center ml-6">
          <%= link_to 'Profile', user_profile_path, class: "text-sm font-medium text-text-light dark:text-text-dark hover:text-primary-600 dark:hover:text-primary-400" %>
          <span class="mx-2 text-border-light dark:text-border-dark">|</span>
          <%= link_to 'Operator', operator_dashboard_path, class: "text-sm font-medium text-text-light dark:text-text-dark hover:text-primary-600 dark:hover:text-primary-400" %>
        </div>
      <% end %>
    </div>
  </div>
</nav>
